# 07장 Promise와 async/await 구문

<details><summary>Table of Contents</summary>

-   07-1 비동기 콜백 함수 [:link:](#07-1-비동기-콜백-함수)
    -   동기와 비동기 API [:link:](#동기와-비동기-api)
    -   readFileSync와 readFile API [:link:](#readfilesync와-readfile-api)
    -   단일 스레드와 비동기 API [:link:](#단일-스레드와-비동기-api)
    -   콜백 지옥 [:link:](#콜백-지옥)
-   07-2 Promise 이해하기 [:link:](#07-2-promise-이해하기)
-   07-3 async와 await 구문 [:link:](#07-3-async와-await-구문)

</details>

## 07-1 비동기 콜백 함수

### 동기와 비동기 API

`node.js`는 파일 시스템과 관련된 기능을 모아둔 `fs` 패키지를 제공한다.<br/>
`fs` 패키지는 같은 기능을 **동기**(**Synchronous**)와 **비동기**(**Asynchronous**) 버전으로 나누어 제공한다.<br/>
파일을 읽는 기능은 **동기** 버전인 `readFileSync`와 **비동기** 버전인 `readFile`로 제공한다.<br/>

-   `readFileSync` 함수와 `readFile` 함수를 이용해 파일을 읽는 예시

```typescript
import { readFileSync, readFile } from "fs";

console.log("Read package.json using synchronous api...");
const buffer: Buffer = readFileSync("./package.json");
console.log(buffer.toString());

readFile("./package.json", (error: Error, buffer: Buffer) => {
    console.log("Read package.json using asynchronous api...");
    console.log(buffer.toString());
});
```

위의 코드는 `package.json`파일을 **동기**, **비동기** 방식으로 읽어 출력하는 예시다.<br/>
**동기** 방식인 `readFileSync` 함수는 파일의 경로를 인자로 받아 파일을 읽어온다.<br/>
**비동기** 방식인 `readFile` 함수는 경로와 파일을 읽어온 후 수행 할 콜백 함수를 받는다.<br/>

-   `readFileSync` 함수와 `readFile` 함수를 이용해 파일을 읽는 예시 실행 결과

<img src="./images/1.png" width="600" height="auto">

**비동기** 방식인 `readFile` 함수는 `Promise`와 `async/await` 구문을 이용해 아래 같이 작성할 수 있다.<br/>

-   `Promise`와 `async/awiat` 구문을 이용해 파일을 읽는 예시

```typescript
const readFilePromise = (fileName: string): Promise<string> =>
    new Promise<string>((resolve, reject) => {
        readFile(fileName, (error: Error, buffer: Buffer) => {
            if (error) {
                reject(error);
            }

            resolve(buffer.toString());
        });
    });

(async () => {
    const content = await readFilePromise("./package.json");
    console.log("Read package.json using Promise and async/await...");
    console.log(content);
})();
```

-   `Promise`와 `async/awiat` 구문을 이용해 파일을 읽는 예시 실행 결과

<img src="./images/2.png" width="600" height="auto">

**API**는 일반 함수와 달리 파일을 읽어오는 과정 등 실행 시 **물리적인 시간이 소요**된다.<br/>
`fs`는 파일의 **모든 내용이 읽을 때 까지 동작을 잠시 멈추는 동기 방식**의 API를 제공한다.<br/>
또한 프로그램의 **동작을 멈추지 않는 대신 결과를 콜백 함수로 얻게 하는 비동기 방식** 또한 제공한다.<br/>
**비동기 API**의 콜백 함수는 **비동기 콜백 함수**이며 일반 함수와 달리 **API의 결과를 받는 목적**으로 사용된다.<br/>

### readFileSync와 readFile API

### 단일 스레드와 비동기 API

### 콜백 지옥

[[🔝위로가기]](#07장-promise와-asyncawait-구문)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 07-2 Promise 이해하기

[[🔝위로가기]](#07장-promise와-asyncawait-구문)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 07-3 async와 await 구문

[[🔝위로가기]](#07장-promise와-asyncawait-구문)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)
