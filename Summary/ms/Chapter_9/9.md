# 09장 람다 라이브러리

<details><summary>Table of Contents</summary>

-   09-1 람다 라이브러리 소개 [:link:](#09-1-람다-라이브러리-소개)
    -   ramda 라이브러리 [:link:](#ramda-라이브러리)
    -   실습 프로젝트 구성 [:link:](#실습-프로젝트-구성)
    -   ramda 패키지 불러오기 [:link:](#ramda-패키지-불러오기)
-   09-2 람다 기본 사용법 [:link:](#09-2-람다-기본-사용법)
    -   R.range 함수 [:link:](#rrange-함수)
    -   R.tap 디버깅용 함수 [:link:](#rtap-디버깅용-함수)
    -   R.pipe 함수 [:link:](#rpipe-함수)
    -   포인트가 없는 함수 [:link:](#포인트가-없는-함수)
    -   자동 커리 이해하기 [:link:](#자동-커리-이해하기)
    -   R.curryN 함수 [:link:](#rcurryn-함수)
    -   순수 함수 [:link:](#순수-함수)
-   09-3 배열에 담긴 수 다루기 [:link:](#09-3-배열에-담긴-수-다루기)
-   09-4 서술자와 조건 연산 [:link:](#09-4-서술자와-조건-연산)
-   09-5 문자열 다루기 [:link:](#09-5-문자열-다루기)
-   09-6 chance 패키지로 객체 만들기 [:link:](#09-6-chance-패키지로-객체-만들기)
-   09-7 렌즈를 활용한 객체의 속성 다루기 [:link:](#09-7-렌즈를-활용한-객체의-속성-다루기)
-   09-8 객체 다루기 [:link:](#09-8-객체-다루기)
-   09-9 배열 다루기 [:link:](#09-9-배열-다루기)
-   09-10 조합 논리 이해하기 [:link:](#09-10-조합-논리-이해하기)

</details>

## 09-1 람다 라이브러리 소개

### ramda 라이브러리

`ramda` 패키지는 `compose`나 `pipe`를 사용하는 **함수 조합**을 쉽게 사용하도록 설계된 라이브러리다.<br/>
자바스크립트 오픈소스 라이브러리인 `ramda`는 아래와 같은 특징이 있다.<br/>

1. Typescript 언어와 100% 호환된다.
2. `compose`와 `pipe` 함수를 제공한다.
3. 자동 커리 기능을 제공한다.
4. 포인트가 없는 고차 도움 함수를 제공한다.
5. 조합 논리 함수를 일부 제공한다.
6. 하스켈 렌즈 라이브러리의 기능을 일부 제공한다.
7. 자바스크립트 표준 모나드 규격과 호환된다.

`ramda` 패키지는 많은 도움 함수를 제공한다.<br/>
이 도움 함수들의 문서는 아래의 두 사이트에서 찾을 수 있다.<br/>

> [https://ramdajs.com/docs/](https://ramdajs.com/docs/) : 함수를 알파벳 순서로 분류<br/>[https://devdocs.io/ramda/](https://devdocs.io/ramda/) : 함수를 기능 위주로 분류<br/>

0.26.1버전 기준의 `ramda` 패키지가 제공하는 함수 구분은 아래와 같다.<br/>

|      구분       | 내용                                                                                        |
| :-------------: | :------------------------------------------------------------------------------------------ |
| 함수 (Function) | `R.compose`, `R.pipe`, `R.curry` 등 52개의 함수                                             |
|  리스트 (List)  | 배열을 대상으로 하는 `R.map`, `R.filter`, `R.reduce` 등 87개 함수                           |
|  로직 (Logic)   | `R.not`, `R.or`, `R.cond` 등 불리언 로직 관련 17개 함수                                     |
|   수학 (Math)   | `R.add`, `R.subtract`, `R.multiply`, `R.divide` 등 수 관련 13개 함수                        |
|  객체 (Object)  | `R.prop`, `R.lens` 등 객체와 렌즈 관련 49개 함수                                            |
| 관계 (Relation) | `R.lt`, `R.lte`, `R.gt`, `R.gte` 등 두 값의 관계를 파악하게 하는 25개 함수                  |
| 문자열 (String) | `R.match`, `R.replace`, `R.split` 등 문자열을 대상으로 정규식 등을 할 수 있게 하는 8개 함수 |
|   타입 (Type)   | `R.is`, `R.isNil`, `R.type` 등 대상의 타입을 파악하게 하는 4개 함수                         |

### 실습 프로젝트 구성

프로젝트를 진행할 폴더를 만들고 해당 폴더로 이동한 후 아래의 명령어를 실행한다.<br/>

```shell
> npm init --y
> npm i -D typescript ts-node @types/node
> mkdir src
```

이어서 아래의 명령어로 `ramda` 패키지를 설치한다.<br/>

```shell
> npm i -S ramda
> npm i -D @types/ramda
```

또한 가짜 데이터를 만들어 주는 `chance` 패키지를 설치한다.<br/>

```shell
> npm i -S chance
> npm i -D @types/chance
```

마지막으로 `package.json`이 있는 경로에 아래와 같이 `tsconfig.json` 파일을 생성한다.<br/>

```json
{
    "compilerOptions": {
        "module": "CommonJS",
        "esModuleInterop": true,
        "target": "es5",
        "moduleResolution": "node",
        "outDir": "dist",
        "baseUrl": ".",
        "sourceMap": true,
        "downlevelIteration": true,
        "noImplicitAny": false,
        "paths": {
            "*": ["node_modules/*"]
        }
    },
    "include": ["src/**/*"]
}
```

`ramda` 패키지는 Javascript를 대상으로 설계되었기 때문이다.<br/>
따라서 Typescript는 `any` 타입을 완전히 Javascript 적으로 해석애야 한다.<br/>
그러므로 `tsconfig.json`의 `noImplicitAny` 속성값을 `false`로 지정한다.<br/>

### ramda 패키지 불러오기

보통 Typescript 소스코드에서는 `ramda` 패키지는 아래와 같이 불러온다.<br/>

```typescript
import * as R from "ramda";
```

`R` 이라는 심벌로 `ramda` 패키지를 사용해 `R.함수명` 형식으로 함수들을 사용한다.<br/>
프로젝트 배포 시 크기를 줄이기 위해서 패키지를 `* as R`과 같이 불러온 것을 아래와 같이 변경하는 것이 좋다.<br/>

```typescript
import { range } from "ramda";
```

`import * as R`과 같이 사용하면 `ramda` 패키지 중 사용하지 않는 함수들도 패키징되게 된다.<br/>
`import { range }`와 같이 사용하면 `range` 함수만 패키징 되므로 패키징된 코드의 크기를 줄일 수 있다.<br/>

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-2 람다 기본 사용법

### R.range 함수

`R.range` 함수는 아래의 형식으로 사용하며 `[최솟값, 최솟값 + 1, ..., 최댓값 - 1]` 형태의 배열을 생성한다.<br/>

```typescript
import * as R from "ramda";

console.log(R.range(1, 9 + 1)); // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

위의 코드는 `R.range` 함수를 이용해 1부터 9까지 연속된 숫자 배열을 생성하는 예시다.<br/>

### R.tap 디버깅용 함수

복잡한 함수를 간단하게 구현하려면 **함수 조합**을 이용한다.<br/>
이때 단계별로 값이 어떻게 변하는지 파악하면서 코드를 작성해야한다.<br/>
이때 `ramda`가 제공하는 `R.tap` 함수는 **2차 고차 함수** 형태로 현재 값을 파악할 수 있게 해준다.<br/>

```typescript
R.tap(콜백 함수)(배열)
```

아래 코드는 `R.range` 함수로 생성한 배열의 내용을 `R.tap` 함수를 사용해 화면에 출력하는 예시다.<br/>

```typescript
import * as R from "ramda";

const numbers: number[] = R.range(1, 9 + 1);
R.tap((n) => console.log(n))(numbers); // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

`R.tap` 함수는 설계대로 **합수 조합**이 동작하지 않을 때 **논리 오류를 찾기 위해 사용**한다.<br/>

### R.pipe 함수

`ramda`는 앞에서 설명한 `compose`와 `pipe` 함수를 `R.compose`와 `R.pipe` 형태로 제공한다.<br/>

```typescript
import * as R from "ramda";

const array: number[] = R.range(1, 10);
R.pipe(R.tap((n) => console.log(n)))(array); // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

`R.compose`보다 `R.pipe` 함수가 코드를 이해하기 편하며 두 함수 모두 **함수 조합**을 위해 사용된다.<br/>

### 포인트가 없는 함수

`ramda` 라이브러리는 200개가 넘는 함수를 제공하지만 대부분은 **2차 고차 함수** 형태로 구현되어 있다.<br/>
**2차 고차 함수**는 **포인트가 없는 함수** 형태로 사용할 수 있다.<br/>

```typescript
import * as R from "ramda";

export const dump = R.pipe(R.tap((n) => console.log(n)));
```

위의 `dump` 함수는 **포인트가 없는 함수**의 전형적인 모습이다.<br/>
아래와 같은 테스트 코드를 작성해 실행하면 실제 함수로 동작한다.<br/>

```typescript
import * as R from "ramda";
import { dump } from "./Dump";

dump(R.range(1, 10)); // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

`ramda` 라이브러리는 Typescript를 고려해 만든 라이브러리가 아니다.<br/>
따라서 **포인트가 없는 함수**를 아래 같이 일반 화살표 함수로 만들면 오류가 발생한다.<br/>

```typescript
const dumpError = <T>(array: T[]): T[] =>
    R.pipe(R.tap((n) => console.log(n)))(array);
```

-   **포인트가 없는 함수**를 화살표 함수로 만들었을 경우 발생한 오류

<img src="./images/1.png" width="500" height="auto">

이 오류를 해결하기 위해서는 **타입 단언**을 사용해야 한다.<br/>

```typescript
export const dumpArrow = <T>(array: T[]): T[] =>
    R.pipe(R.tap((n) => console.log(n)))(array) as T[];
```

`as T[]`처럼 타입 단언을 사용해 `R.pipe(...)(array)`가 반환하는 타입을 `T[]`로 바꾸어준다.<br/>

```typescript
import * as R from "ramda";
import { dumpArrow } from "./Dump";

dumpArrow(R.range(1, 10)); // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
```

**포인트가 없는 함수**인 `dump` 함수와 동일하게 `dumpArraow` 함수가 작동하는 것을 볼 수 있다.<br/>
동일하게 작동하지만 **포인트가 없는 함수**를 만드는 것이 불필요한 오류를 만나지 않는 방법이다.<br/>

### 자동 커리 이해하기

`ramda` 라이브러리의 함수들은 아래의 코드처럼 매개변수가 두 개인 일반 함수처럼 사용할 수 있다.<br/>
또한

### R.curryN 함수

### 순수 함수

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-3 배열에 담긴 수 다루기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-4 서술자와 조건 연산

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-5 문자열 다루기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-6 chance 패키지로 객체 만들기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-7 렌즈를 활용한 객체의 속성 다루기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-8 객체 다루기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-9 배열 다루기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)

## 09-10 조합 논리 이해하기

[[🔝위로가기]](#09장-람다-라이브러리)&nbsp; / &nbsp;[[🔙뒤로가기]](https://github.com/alstn2468/DoIt_Typescript_Programming/blob/master/README.md)
